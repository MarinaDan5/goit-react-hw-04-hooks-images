{"version":3,"sources":["apiServises/PixabayAPI.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Loader/Loader.js","components/Button/Button.js","components/Modal/Modal.js","App.js","index.js"],"names":["api","fetchImages","nextName","page","fetch","then","response","ok","json","Searchbar","state","imageSearch","handleNameChange","event","setState","currentTarget","value","toLowerCase","hendleSubmit","preventDefault","trim","props","onSubmit","toast","className","this","type","onClick","placeholder","name","onChange","Component","ImageGalleryItem","id","tags","smallImage","largeImage","onClickItem","alt","src","ImageGallery","images","toggleModal","map","webformatURL","largeImageURL","App","color","height","width","timeout","visible","Button","loadMore","Modal","handleEscClick","e","code","closeModal","window","addEventListener","removeEventListener","image","tabIndex","handleFormSubmit","showModal","biggerImage","status","buttonMore","error","bind","prevProps","prevState","prevName","prevPage","nextPage","API","data","hits","scrollTo","top","document","documentElement","scrollHeight","behavior","catch","length","autoClose","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.3f1d26ca.chunk.js","sourcesContent":["const BASE_URL = 'https://pixabay.com/api/';\r\n\r\nfunction fetchImages(nextName, page) {\r\n  return fetch(\r\n    `${BASE_URL}?q=${nextName}&page=${page}&key=22948262-953a9601ef8ec29dc611c2152&image_type=photo&orientation=horizontal&per_page=12\r\n`,\r\n  ).then(response => {\r\n    if (response.ok) {\r\n      return response.json();\r\n    }\r\n  });\r\n}\r\nconst api = { fetchImages };\r\nexport default api;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport './Searchbar.css';\r\n\r\nexport default class Searchbar extends Component {\r\n  state = {\r\n    imageSearch: '',\r\n  };\r\n  handleNameChange = event => {\r\n    this.setState({ imageSearch: event.currentTarget.value.toLowerCase() });\r\n  };\r\n  hendleSubmit = event => {\r\n    event.preventDefault();\r\n    if (this.state.imageSearch.trim() === '') {\r\n      toast('Введите Ваш запрос');\r\n      return;\r\n    }\r\n    this.props.onSubmit(this.state.imageSearch);\r\n    this.setState({ imageSearch: '' });\r\n  };\r\n  render() {\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form onSubmit={this.props.onSubmit} className=\"SearchForm\">\r\n          <button\r\n            type=\"submit\"\r\n            className=\"SearchForm-button\"\r\n            onClick={this.hendleSubmit}\r\n          >\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            // autocomplete=\"off\"\r\n            // autofocus\r\n            placeholder=\"Search images and photos\"\r\n            name=\"imageSearch\"\r\n            value={this.state.imageSearch}\r\n            onChange={this.handleNameChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nSearchbar.propTypes = {\r\n  onSubmit: PropTypes.func,\r\n  imageSearch: PropTypes.string,\r\n};\r\n\r\n","\r\nimport './ImageGalleryItem.css';\r\n\r\nexport default function ImageGalleryItem({ id, tags, smallImage, largeImage, onClickItem }) {\r\n  return (\r\n    <li key={id} className=\"ImageGalleryItem\">\r\n      <img\r\n        className=\"ImageGalleryItem-image\"\r\n        alt={tags}\r\n        src={smallImage}\r\n        data-source={largeImage}\r\n        onClick={()=>{onClickItem(largeImage)}}\r\n      />\r\n    </li>\r\n  );\r\n}\r\n\r\n","import ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\n\r\nimport './ImageGallery.css';\r\n\r\nexport default function ImageGallery({ images,  toggleModal}) {\r\n  return (\r\n    <ul className=\"ImageGallery\">\r\n      {images.map(({ id, tags, webformatURL, largeImageURL }) => (\r\n          <ImageGalleryItem\r\n            key={id}\r\n            tags={tags}\r\n            smallImage={webformatURL}\r\n            largeImage={largeImageURL}\r\n            onClickItem={()=>{toggleModal(largeImageURL)}}\r\n          />\r\n      ))}\r\n    </ul>\r\n  );\r\n}\r\n\r\n","import React, { Component } from 'react';\r\n\r\nimport Loader from 'react-loader-spinner';\r\n\r\nexport default class App extends Component {\r\n  //other logic\r\n  render() {\r\n    return (\r\n      <Loader\r\n        type=\"Puff\"\r\n        color=\"#00BFFF\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000} //3 secs\r\n        visible={true}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import './Button.css';\r\n\r\nexport default function Button({ loadMore }) {\r\n  return (\r\n    <button className=\"Button\" type=\"button\" onClick={loadMore}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n","import { Component } from 'react/cjs/react.production.min';\r\n\r\nimport PropTypes, { string } from 'prop-types';\r\n\r\nimport './Modal.css'\r\n\r\nexport default class Modal extends Component {\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleEscClick);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleEscClick);\r\n  }\r\n\r\n  handleEscClick = e => {\r\n    if (e.code === 'Escape'){\r\n      this.props.closeModal()\r\n    }\r\n  };\r\n\r\n\r\n  render() {\r\n    const { onClick, image } = this.props;\r\n    return (\r\n      <div className=\"Overlay\"\r\n           onClick={onClick}\r\n           tabIndex=\"0\">\r\n        <div className=\"Modal\">\r\n          <img src={image} alt={image.tags} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nModal.propTypes = {\r\n  onClick: PropTypes.func,\r\n  image: string,\r\n  closeModal: PropTypes.func\r\n};","import React, { Component } from 'react';\r\n\r\nimport { ToastContainer } from 'react-toastify';\r\n\r\nimport API from './apiServises/PixabayAPI';\r\n\r\nimport Searchbar from './components/Searchbar/Searchbar';\r\nimport ImageGallery from './components/ImageGallery/ImageGallery';\r\nimport Loader from './components/Loader/Loader';\r\nimport Button from './components/Button/Button';\r\nimport Modal from './components/Modal/Modal';\r\n\r\nimport './App.css';\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      imageSearch: '',\r\n      images: [],\r\n      status: 'idle',\r\n      page: 1,\r\n      buttonMore: false,\r\n      biggerImage: '',\r\n      showModal: false,\r\n      error: '',\r\n    };\r\n\r\n    this.loadMore = this.loadMore.bind(this);\r\n    this.closeModal = this.closeModal.bind(this);\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevName = prevState.imageSearch;\r\n    const nextName = this.state.imageSearch;\r\n    const prevPage = prevState.page;\r\n    const nextPage = this.state.page;\r\n\r\n    if (prevName !== nextName) {\r\n      this.setState({ status: 'pending', page: 1, images: [] });\r\n      this.fetchImages(nextName, nextPage);\r\n    }\r\n    if (prevPage !== nextPage) {\r\n      this.fetchImages(nextName, nextPage);\r\n    }\r\n  }\r\n\r\n  fetchImages(nextName, nextPage) {\r\n    API.fetchImages(nextName, nextPage).then(data => {\r\n      API.fetchImages(nextName, nextPage)\r\n        .then(data => {\r\n          this.setState(prevState => {\r\n            return {\r\n              prevState,\r\n              images: [...prevState.images, ...data.hits],\r\n              status: 'resolved',\r\n              imageSearch: nextName,\r\n            };\r\n          });\r\n\r\n          if (this.prevPage !== nextPage) {\r\n            window.scrollTo({\r\n              top: document.documentElement.scrollHeight,\r\n              behavior: 'smooth',\r\n            });\r\n          }\r\n        })\r\n        .catch(error => this.setState({ error, status: 'rejected' }));\r\n    });\r\n  }\r\n  handleFormSubmit = name => {\r\n    this.fetchImages(name, this.state.page);\r\n  };\r\n\r\n  toggleModal = largeImageURL => {\r\n    this.setState(({ showModal, biggerImage }) => ({\r\n      showModal: !showModal,\r\n      biggerImage: largeImageURL,\r\n    }));\r\n  };\r\n\r\n  closeModal = () => {\r\n    this.setState(() => ({\r\n      showModal: false,\r\n    }));\r\n  };\r\n\r\n  loadMore() {\r\n    this.setState(prevState => ({\r\n      page: prevState.page + 1,\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Searchbar onSubmit={this.handleFormSubmit} />\r\n        {this.state.status === 'idle' && <p>Введите ваш запрос...</p>}\r\n        <ImageGallery\r\n          images={this.state.images}\r\n          toggleModal={largeImageURL => this.toggleModal(largeImageURL)}\r\n        />\r\n        {this.state.status === 'pending' && <Loader />}\r\n        {this.state.images.length !== 0 && <Button loadMore={this.loadMore} />}\r\n\r\n        {this.state.showModal && (\r\n          <Modal\r\n            onClick={() => {\r\n              this.toggleModal();\r\n            }}\r\n            image={this.state.biggerImage}\r\n            closeModal={this.closeModal}\r\n          />\r\n        )}\r\n        <ToastContainer autoClose={3000} />\r\n        {this.state.images.length === 0 && this.state.status === 'resolved' ? (\r\n          <div>По запросу {this.state.imageSearch} ничего не найдено</div>\r\n        ) : null}\r\n        {this.state.status === 'rejected' && <div>{this.state.error}</div>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root'),\n);\n"],"sourceRoot":""}